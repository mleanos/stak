<section>
  <div class="page-header">
    <h3>{{vm.plan.name}} {{vm.plan.category}} - <small>{{vm.plan.release.name}}</small></h3>
    <small><i>Author : {{vm.plan.author.displayName}}       Version: {{vm.plan.status}}</i></small>
  </div>
  <div class="pull-right"
       data-ng-show="vm.plan.isCurrentUserOwner">
    <a class="btn btn-success"
          ng-click="startExecution()">
          <i class="glyphicon glyphicon-play"></i> <em>Start</em>
    </a>
    <a class="btn btn-primary"
       data-ui-sref="plans.edit({ planId: vm.plan._id })">
      <i class="glyphicon glyphicon-edit"></i>
    </a>
    <a class="btn btn-danger" data-ng-click="vm.remove()">
      <i class="glyphicon glyphicon-trash"></i>
    </a>
  </div>
  <div>
    Start: {{(vm.plan.actualStart || vm.plan.updatedStart || vm.plan.initStart) | date : 'MMM d, y h:mm a'}}<br/>
    Duration: {{vm.plan.duration}} Minutes
  </div><br/><br/>
  <div>
    <div class="page-header">
      <h4>Tasks
        <a class="btn btn-info pull-right" data-ui-sref="tasks.create({ planId: vm.plan._id })">
          <i class="glyphicon glyphicon-plus"></i> Add Task
        </a>
      </h4>
    </div>
    <div class="list-group">
      <a data-ng-repeat="task in vm.tasks"
         data-ui-sref="tasks.view({ taskId: task._id, planId: task.parent._id })"
         class="list-group-item">
        <small class="list-group-item-text">
          Posted on
          <span data-ng-bind="task.created | date:'mediumDate'"></span>
          by
          <span data-ng-if="task.createdBy" data-ng-bind="task.createdBy.displayName"></span>
          <span data-ng-if="!task.createdBy">Deleted User</span>
        </small>
        <h4 class="list-group-item-heading" data-ng-bind="task.name"></h4>
      </a>
    </div>
    <div class="alert alert-warning text-center" data-ng-if="vm.tasks.$resolved && !vm.tasks.length">
      No Tasks yet, why don't you <a data-ui-sref="tasks.create">create one</a>?
    </div>
  </div>
</section>
